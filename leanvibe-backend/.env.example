# LeanVibe Backend Environment Configuration
# Copy this file to .env and update values for your environment

# ==============================================
# ENVIRONMENT CONFIGURATION
# ==============================================
LEANVIBE_ENVIRONMENT=development
LOG_LEVEL=INFO

# ==============================================
# APPLICATION CONFIGURATION  
# ==============================================
LEANVIBE_HOST=0.0.0.0
LEANVIBE_API_PORT=8000
LEANVIBE_API_URL=http://localhost:8000

# ==============================================
# SECURITY CONFIGURATION
# ==============================================
# CRITICAL: Generate a strong secret key for production
# You can generate one with: openssl rand -hex 32
LEANVIBE_SECRET_KEY=your-super-secret-key-change-this-in-production-must-be-32-chars

# JWT Token Configuration
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# ==============================================
# DATABASE CONFIGURATION
# ==============================================
# PostgreSQL (Primary Database)
DATABASE_URL=postgresql://postgres:leanvibe123@localhost:5432/leanvibe_development

# Neo4j Graph Database
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=neo4j_password
NEO4J_DATABASE=neo4j

# Redis Cache
REDIS_URL=redis://localhost:6379/0

# ==============================================
# AI/ML CONFIGURATION
# ==============================================
# MLX Configuration
LEANVIBE_MODEL_NAME=Qwen/Qwen2.5-Coder-32B-Instruct
LEANVIBE_FALLBACK_MODEL=microsoft/Phi-3-mini-128k-instruct
LEANVIBE_DEPLOYMENT_MODE=auto
LEANVIBE_MLX_STRATEGY=auto
LEANVIBE_MLX_SERVER_URL=http://127.0.0.1:8082

# Model Performance Settings
LEANVIBE_MAX_TOKENS=1024
LEANVIBE_TEMPERATURE=0.7
LEANVIBE_CONTEXT_LENGTH=32768
LEANVIBE_USE_PRETRAINED_WEIGHTS=true
LEANVIBE_MODEL_CACHE_SIZE_GB=25.0
LEANVIBE_QUANTIZATION=4bit
LEANVIBE_ENABLE_MODEL_CACHING=true

# ==============================================
# FEATURE FLAGS
# ==============================================
LEANVIBE_ENABLE_MONITORING=true
LEANVIBE_ENABLE_LOGGING=true
LEANVIBE_ENABLE_RATE_LIMITING=false
LEANVIBE_ENABLE_API_KEY_AUTH=false
LEANVIBE_DISABLE_ANALYTICS=true
LEANVIBE_NOTIFICATIONS_ENABLED=true

# iOS App Features
VOICE_FEATURES_ENABLED=true
CODE_COMPLETION_ENABLED=true

# ==============================================
# STRIPE PAYMENT PROCESSING
# ==============================================
LEANVIBE_STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
LEANVIBE_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
LEANVIBE_STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# ==============================================
# EMAIL CONFIGURATION
# ==============================================
EMAIL_PROVIDER=smtp
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_TLS=true
FROM_EMAIL=noreply@leanvibe.ai
FROM_NAME=LeanVibe

# ==============================================
# MONITORING & OBSERVABILITY
# ==============================================
# Prometheus Metrics
LEANVIBE_METRICS_PORT=9090
ENABLE_PROMETHEUS_METRICS=true

# Grafana (for docker-compose monitoring profile)
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin123

# Sentry Error Tracking (Optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# ==============================================
# DOCKER COMPOSE CONFIGURATION
# ==============================================
# Database passwords for docker-compose
POSTGRES_PASSWORD=leanvibe123
NEO4J_PASSWORD=neo4j_password

# ==============================================
# PRODUCTION-ONLY SETTINGS
# ==============================================
# These should only be set in production environments

# SSL/TLS Certificate paths (production only)
SSL_CERT_PATH=/etc/ssl/certs/leanvibe.crt
SSL_KEY_PATH=/etc/ssl/private/leanvibe.key

# External service URLs (production only)
EXTERNAL_API_URL=https://api.leanvibe.ai
EXTERNAL_WEBHOOK_URL=https://api.leanvibe.ai/webhooks

# CDN Configuration (production only)
CDN_URL=https://cdn.leanvibe.ai
STATIC_FILES_URL=https://static.leanvibe.ai

# ==============================================
# DEVELOPMENT-ONLY SETTINGS
# ==============================================
# These settings are only used in development

# Enable debug mode (development only)
LEANVIBE_DEBUG_MODE=false
LEANVIBE_DEVELOPMENT_MODE=true

# Hot reload settings (development only)
ENABLE_HOT_RELOAD=true
RELOAD_DIRS=./app

# Development database (SQLite fallback)
DEV_DATABASE_URL=sqlite:///./leanvibe_dev.db

# ==============================================
# PERFORMANCE TUNING
# ==============================================
# Cache configuration
LEANVIBE_CACHE_TTL=300
LEANVIBE_CACHE_DIR=~/.cache/leanvibe

# Threading and async settings
WORKER_PROCESSES=4
MAX_CONNECTIONS=1000
KEEPALIVE_TIMEOUT=65

# Request limits
MAX_REQUEST_SIZE=10485760  # 10MB
REQUEST_TIMEOUT=30

# ==============================================
# LOGGING CONFIGURATION
# ==============================================
# Log levels: TRACE, DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
LOG_FORMAT=json  # json or standard
LOG_FILE_PATH=./logs/leanvibe.log
LOG_ROTATION_SIZE=10MB
LOG_RETENTION_DAYS=30

# ==============================================
# CORS CONFIGURATION
# ==============================================
# CORS origins for development (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000

# Production CORS origins
CORS_ORIGINS_PRODUCTION=https://app.leanvibe.ai,https://leanvibe.ai